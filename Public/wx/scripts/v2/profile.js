define("js/v2/js/profile",["lib/zepto/zepto"],function(e){var t=e("lib/zepto/zepto");t(function(){function e(e){return e=e||"没有更多内容了",html='<div class="nomore-page">					<div class="pictip"></div>						<div class="tip">'+e+"</div>				</div>"}function n(e,t){return g[e.applyStatusList[t].statusDetail].replace(/\{type\}/,function(t){return t?m[e.job_kind]:""})}function i(){t(e()).insertAfter(t(".list-content"))}function a(e){for(var t="",i=0;e.data.length>i;i++){var a=e.data[i],r=a;t+='<li class="item">									<div class="list-top">										<div class="list-title">											<h3><em>'+a.salary+"</em>"+a.job_title+'</h3>											<div class="work-info-con clearfix">												<div class="work-info">													<p>'+a.job_compname+"</p>													<p>"+a.job_dq_name+'<span class="sep">|</span>应聘于'+a.apply_time+'</p>												</div>												<span class="btn-recommend">													<label>'+h[a.status]+'</label>													<label class="icon st ">?</label>												</span>											</div>										</div>									</div>								<div class="jobdetail">								<ul>',r.closeFlag&&(t+='<li class="current">												<i class="tranigle"></i>												<i class="icon-status"></i>												<div>														<p>该职位已结束招聘，感谢您的关注。</p>												</div>										</li>');for(var o=0,s=r.applyStatusList.length;s>o;o++)t+="<li "+(r.closeFlag||0!=o?"":'class="current"')+'>														<i class="tranigle"></i>														<i class="icon-status"></i>														<div>																<p>'+n(r,o)+"</p>																<time>"+r.applyStatusList[o].statusTime+"</time>														</div>												</li>";t+='</ul>									<a href="'+r.job_url+'"  class="button lbutton">查看职位详情</a>									</div>								</div>							</li>'}return t}function r(e){e=e||function(){},t.ajax({url:"/profile/showapplyjoblist4json/",data:{page:d,pageSize:f},success:function(t){t=JSON.parse(t),e(t)}})}var o=t(".page-ypzt");if(o.length){var s="st-rotate";t(".page-ypzt").delegate(".list-top","tap",function(){var e=t(this).find(".btn-recommend"),n=t(this).parent(".item");e.hasClass(s)?(e.removeClass(s),t(".jobdetail",n[0]).css({display:"none"}),t(".progress-con",n[0]).css({display:"none"})):(e.addClass(s),t(".jobdetail",n[0]).css({display:"block"}),t(".progress-con",n[0]).css({display:"block"}))});var l=!1,c=!1,u=document.documentElement.clientHeight,d=1,p=t(".list-content ul"),f=20,h={0:"已投递",1:"筛选中",2:"暂不适合",3:"面试邀约"},g={0:"您的简历已投递成功。",1:"{type}已经查看您的简历。",2:"企业HR已委托猎聘网职业顾问与您联系，请保持手机畅通。",3:"企业HR邀请您前往该公司面试，预祝您面试成功。",4:"很遗憾，您简历的个人情况与该职位的招聘要求暂不相符，若有合适的职位机会将第一时间推荐给您，祝您职场顺利。   ",5:"{type}正在进行内部讨论，请耐心等待进一步通知。"},m={1:"猎头顾问",2:"企业HR"},v=+document.getElementsByName("pagecount")[0].value||0,y=Math.ceil(v/f);p.length&&t(document).on("touchmove",function(){if(150>document.body.offsetHeight-u-Math.max(t(document.body).scrollTop(),t(document.documentElement).scrollTop())){if(l||c)return;if(c=!0,t(".item",p[0]),1===y)return l=!0,i(),void 0;r(function(e){if(c=!1,!l)if(1===e.flag){++d;var t=document.createElement("div");for(t.innerHTML=a(e);t.firstChild;)p[0].appendChild(t.firstChild);d>=y&&(l=!0,i())}else alert("获取数据失败")})}})}}),t(function(){function e(e){var t="st-rotate";e.addClass(t),e.closest("li").find(".sub-list").hide(),e.find(".toggle-txt").text("展开")}function n(e){var t="st-rotate";e.removeClass(t),e.closest("li").find(".sub-list").show(),e.find(".toggle-txt").text("收起")}function i(i){var a=t(".toggle");1==i?n(a):e(a)}var a=t(".page-private");if(a.length){var r="st-rotate";a.delegate(".del-icon","tap",function(){var e=t(this).closest("li");e.height(e[0].offsetHeight+"px"),e.height(0),setTimeout(function(){e.remove(),11>t("#shield-company li").length&&t("#add-shield-company").show()},500)}),a.delegate(".toggle","tap",function(){var i=t(this);i.hasClass(r)?n(i):e(i)}),a.delegate(".addnewcom","tap",function(){if(11!==t("#shield-company li").length){var e='<li class="addnewli">							<a class="icon front-icon del-icon" href="javascript:;">Z</a>							<span class="item">								<span class="text"><input type="text" name="secret_key_array" maxlength=25 class="input"></span>							</span>						</li>';t(e).insertBefore(t(this).closest("li")),11===t("#shield-company li").length&&t("#add-shield-company").hide()}}),11===t("#shield-company li").length&&t("#add-shield-company").hide(),t('input[name="secret_e_shield"]').change(function(){i(t('input[name="secret_e_shield"]:checked').val())}),t('input[name="secret_contactflag"]').change(function(){$this=t(this),2==this.value?$this.closest(".item-list-inner").find(".sub-list").show():$this.closest(".item-list-inner").find(".sub-list").hide()}),i(t('input[name="secret_e_shield"]:checked').val()),t("#private-save-btn").click(function(){var e=t('input[name="secret_e_shield"]:checked').val(),n=t('input[name="secret_key_array"]');return 1==e&&0===n.filter(function(e){return""!=n[e].value}).length?(alert("请添加屏蔽企业!"),!1):(t.ajax({url:"/profile/updatesecret/",data:t("#private-form").serialize(),success:function(e){e=JSON.parse(e),1==e.flag?(t(".addnewli input").each(function(e,n){t.trim(n.value).length||(t(this).closest(".addnewli").remove(),11>t("#shield-company li").length&&t("#add-shield-company").show())}),alert("保存成功")):alert("保存失败")}}),void 0)})}}),t(function(){var n=t(".page-profile");if(n.length){var i=t(".item-list .num:first").html();i&&0!==parseInt(i.match(/\d+/)[0],10)||e.async("lib/dialog/dialog",function(e){new e.dialog({html:'<div style="padding: 15px 0 10px 9px;line-height: 1.5;">							<div>您尚未填写任何简历信息，个人中心里的功能无法使用，请先填写简历。</div>						</div>',buttons:[{text:"取消"},{text:"立即填写简历",callback:function(){location.href="/resume/showresumelist/?from=1"}}]})})}})});